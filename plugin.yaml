plugins:
  nsx:
    executor: central_deployment_agent
    # source: https://github.com/Cloudify-PS/cloudify-nsx-plugin/archive/master.zip
    package_name: cloudify-nsx-plugin
    package_version: '0.1'

node_types:

  # vcenter resource pool
  cloudify.vcenter.resource_pool:
    derived_from: cloudify.nodes.Root
    properties:
      vcenter_auth:
        default: {}
      resource_pool:
        default: {}
    interfaces:
      cloudify.interfaces.lifecycle:
        create:
          implementation: nsx.cloudify_nsx.vcenter_resource_pool.create
        delete:
          implementation: nsx.cloudify_nsx.vcenter_resource_pool.delete

  # vcenter datastore
  cloudify.vcenter.datastore:
    derived_from: cloudify.nodes.Root
    properties:
      vcenter_auth:
        default: {}
      datastore:
        default: {}
    interfaces:
      cloudify.interfaces.lifecycle:
        create:
          implementation: nsx.cloudify_nsx.vcenter_datastore.create
        delete:
          implementation: nsx.cloudify_nsx.vcenter_datastore.delete

  # vcenter datacenter
  cloudify.vcenter.datacenter:
    derived_from: cloudify.nodes.Root
    properties:
      vcenter_auth:
        default: {}
      datacenter:
        default: {}
    interfaces:
      cloudify.interfaces.lifecycle:
        create:
          implementation: nsx.cloudify_nsx.vcenter_datacenter.create
        delete:
          implementation: nsx.cloudify_nsx.vcenter_datacenter.delete

  # vcenter datacenter
  cloudify.vcenter.dvportgroup:
    derived_from: cloudify.nodes.Root
    properties:
      vcenter_auth:
        default: {}
      dvportgroup:
        default: {}
    interfaces:
      cloudify.interfaces.lifecycle:
        create:
          implementation: nsx.cloudify_nsx.vcenter_dvportgroup.create
        delete:
          implementation: nsx.cloudify_nsx.vcenter_dvportgroup.delete

  # logical switches
  cloudify.nsx.lswitch:
    derived_from: cloudify.nodes.Root
    properties:
      nsx_auth:
        default: {}
      switch:
        default: {}
    interfaces:
      cloudify.interfaces.lifecycle:
        create:
          implementation: nsx.cloudify_nsx.nsx_lswitch.create
        delete:
          implementation: nsx.cloudify_nsx.nsx_lswitch.delete

  # distributed logical routers
  cloudify.nsx.dlr:
    derived_from: cloudify.nodes.Root
    properties:
      nsx_auth:
        default: {}
      router:
        default: {}
    interfaces:
      cloudify.interfaces.lifecycle:
        create:
          implementation: nsx.cloudify_nsx.nsx_dlr.create
        delete:
          implementation: nsx.cloudify_nsx.nsx_dlr.delete

  # distributed logical routers interface
  cloudify.nsx.dlr_interface:
    derived_from: cloudify.nodes.Root
    properties:
      nsx_auth:
        default: {}
      interface:
        default: {}
    interfaces:
      cloudify.interfaces.lifecycle:
        create:
          implementation: nsx.cloudify_nsx.nsx_dlr_interface.create
        delete:
          implementation: nsx.cloudify_nsx.nsx_dlr_interface.delete

  # distributed logical routers gateway
  cloudify.nsx.dlr_dgw:
    derived_from: cloudify.nodes.Root
    properties:
      nsx_auth:
        default: {}
      gateway:
        default: {}
    interfaces:
      cloudify.interfaces.lifecycle:
        create:
          implementation: nsx.cloudify_nsx.nsx_dlr_dgw.create
        delete:
          implementation: nsx.cloudify_nsx.nsx_dlr_dgw.delete

  # edge services gateways
  cloudify.nsx.esg:
    derived_from: cloudify.nodes.Root
    properties:
      nsx_auth:
        default: {}
      edge:
        default: {}
      firewall:
        default:
          # accept or deny
          action: accept
          # true or false
          logging: false
    interfaces:
      cloudify.interfaces.lifecycle:
        create:
          implementation: nsx.cloudify_nsx.nsx_esg.create
          inputs: {}
        delete:
          implementation: nsx.cloudify_nsx.nsx_esg.delete
          inputs: {}

  # edge services gateways interfaces
  cloudify.nsx.esg_interface:
    derived_from: cloudify.nodes.Root

    interfaces:
      cloudify.interfaces.lifecycle:
        create:
          implementation: nsx.cloudify_nsx.stub.create
          inputs: {}
        delete:
          implementation: nsx.cloudify_nsx.stub.delete
          inputs: {}

  # edge services gateways route
  cloudify.nsx.esg_route:
    derived_from: cloudify.nodes.Root

    interfaces:
      cloudify.interfaces.lifecycle:
        create:
          implementation: nsx.cloudify_nsx.stub.create
          inputs: {}
        delete:
          implementation: nsx.cloudify_nsx.stub.delete
          inputs: {}

  # Edge DHCP
  cloudify.nsx.dhcp:
    derived_from: cloudify.nodes.Root

    interfaces:
      cloudify.interfaces.lifecycle:
        create:
          implementation: nsx.cloudify_nsx.stub.create
          inputs: {}
        delete:
          implementation: nsx.cloudify_nsx.stub.delete
          inputs: {}

  # Edge DHCP pool
  cloudify.nsx.dhcp_pool:
    derived_from: cloudify.nodes.Root

    interfaces:
      cloudify.interfaces.lifecycle:
        create:
          implementation: nsx.cloudify_nsx.stub.create
          inputs: {}
        delete:
          implementation: nsx.cloudify_nsx.stub.delete
          inputs: {}

  # Edge DHCP binding
  cloudify.nsx.dhcp_binding:
    derived_from: cloudify.nodes.Root

    interfaces:
      cloudify.interfaces.lifecycle:
        create:
          implementation: nsx.cloudify_nsx.stub.create
          inputs: {}
        delete:
          implementation: nsx.cloudify_nsx.stub.delete
          inputs: {}

  # distributed firewall
  cloudify.nsx.dfw_section:
    derived_from: cloudify.nodes.Root

    interfaces:
      cloudify.interfaces.lifecycle:
        create:
          implementation: nsx.cloudify_nsx.stub.create
          inputs: {}
        delete:
          implementation: nsx.cloudify_nsx.stub.delete
          inputs: {}

  # distributed firewall
  cloudify.nsx.dfw_rule:
    derived_from: cloudify.nodes.Root

    interfaces:
      cloudify.interfaces.lifecycle:
        create:
          implementation: nsx.cloudify_nsx.stub.create
          inputs: {}
        delete:
          implementation: nsx.cloudify_nsx.stub.delete
          inputs: {}
